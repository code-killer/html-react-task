<!DOCTYPE html>
<html>
  <head>
  <style>
	a.delete {
	  color:  #7a7b7f;
	    text-decoration: none;
    
	}
  </style>
    <meta charset="UTF-8" />
    <title>Hello World</title>
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" >
    <script src="https://unpkg.com/react@latest/dist/react.js"></script>
    <script src="https://unpkg.com/react-dom@latest/dist/react-dom.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
  </head>
  <body>
  <div class= "container">
  <div class="row">
  <div class="col-md-12">
    <div id="root"></div>
	</div>
	</div>
	</div>
    <script type="text/babel">
	
/* ########## Creates the main jsx class "App" ######### */

	var App = React.createClass	({
	
		/* Creates a functin which will create a data structure and display it 
		for table on first time run code */
		getInitialState: function ()	{
			return	{
			title: "List Of Participants ",
			name: '',
			participantList:	[
						{
							id: 1,
							name: 'Alex Cross',
							email: 'alex@email.org',
							phone: '046666611'
						
						},
						{
							id: 2,
							name: 'Benzeman Hank',
							email: 'benzi@email.org',
							phone: '046666662'
						
						},
						{
							id: 3,
							name: 'Charli Harper',
							email: 'charli@email.org',
							phone: '046666699'
						
						}
								]
					}
										},
		/* this function called 'render' will render the table and the form 
			also a title which need to improve later */
		render: function (){
			return (
			<div>
				{this.state.title}
				<ParticipantsForm submitAdd={this.handleSubmitAdd}/>
				<ParticipantsTable participantList = {this.state.participantList} deleteParticipant = {this.handleDelete}/>
			</div>
					)
							},
							
		/* this function 'handleSubmitAdd' will push the newly submited data from form to the state */	
		handleSubmitAdd: function (name,email,phone)	{
			var newParticipant = 	{
				id: this.state.participantList.length+1,
				name: name,
				email: email,
				phone: phone
									}
			this.setState ({participantList: this.state.participantList.concat(newParticipant)});
						
														},
		handleDelete: function (deleteID) {
		var stateParticipantList = this.state.participantList;
		var j = stateParticipantList.length;
		
		for (var i=0; i<j; i++) {
			if (stateParticipantList[i].id == deleteID) {
				stateParticipantList.splice(i,1);
				}
			}
			this.setState({participantList:stateParticipantList});
		
		
		}
							}); /* ####### end of jsx class "App" ###### */
							
	
/* ############# 	Creates a jsx class "ParticipantsForm" to have a 3 field form 
					to add data to state which displyes on table 
################ */
		
	var ParticipantsForm  = React.createClass	({
	
		/* this 'rander' function will generate an inline bootstrap form 
			containing 3 input fields to add data to state */
		render: function()	{
			return	(
			<div>
				<form onSubmit={this.submit} className="form-inline">
					<input type="text" className="form-control mb-2 mr-sm-2 mb-sm-0" ref="name" placeholder="Name" />
					<div className="input-group mb-2 mr-sm-2 mb-sm-0">
						<div className="input-group-addon">@</div>
							<input type="email" className="form-control" placeholder="Email Address" ref="email" />
					</div>
					<div className="input-group mb-2 mr-sm-2 mb-sm-0">
						<div className="input-group-addon">Call</div>
							<input type="phone" className="form-control" ref="phone" placeholder="Phone Number"/>
					</div>
					<div className="input-group mb-2 mr-sm-2 mb-sm-0">
						<button type="submit" className="btn btn-primary">Add</button>
					</div>
				</form>
			</div>
					)
							},
		/* this 'submit' is called when the form is submited to add data, 
			this function validates and processes the data   */					
		submit: function(e)	{
			e.preventDefault();
			var name = this.refs.name.value.trim();
			var email = this.refs.email.value.trim();
			var phone = this.refs.phone.value.trim();
			
			if (!name || !email || !phone)	{
				alert ('Some value fields are empty !');
				return;
											}
			
			this.props.submitAdd (name,email,phone); /* cals 'submitAdd' funtion and passes the parameters */
			
			this.refs.name.value ='';
			this.refs.email.value ='';
			this.refs.phone.value ='';
							}
												}); /* ####### end of class "ParticipantsForm" ###### */
	
/* ############## 	creates 'ParticipantsTable' class, this class displayes 
					all data in state thrugh rendering and maping through the participantList's property 
################## */			
	var ParticipantsTable  = React.createClass	({
		render: function ()	{
				return	(
				<table className="table table-striped">
				  <thead>
					<tr>
					  <th>Name</th>
					  <th>Email</th>
					  <th>Phone</th>
					</tr>
				  </thead>
				  <tbody>
				   {
				   
						this.props.participantList.map	(
							participantList => {
							return <tr participantList = {participantList} key ={participantList.id}> 
							<td> {participantList.name}</td>
							<td> {participantList.email}</td>
							<td> {participantList.phone}</td>
							<td> <a onClick={this.delete.bind(this,participantList.id)} className="material-icons delete">delete</a></td>
							</tr>
												}
														)
					
					}
				  </tbody>
				</table>
						)
							},
				delete(deleteID) {
					this.props.deleteParticipant(deleteID);
				}
													});
	
/* ####### creates react render DOM calls the main class App and prints in HTML div 'root' 
########## */
	ReactDOM.render(
        <App />,
        document.getElementById('root')
					);

    </script>
  </body>
</html>
